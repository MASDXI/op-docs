---
title: Spin up your proposer
lang: en-US
description: Learn how to set up and configure an OP Stack proposer to post L2 state roots.
content_type: tutorial
topic: proposer-setup
personas:
  - chain-operator
categories:
  - testnet
  - mainnet
  - op-proposer
  - state-commitment
  - l2-output-submission
  - withdrawal-verification
is_imported_content: 'false'
---

import { Callout, Steps } from 'nextra/components'

# Spin up your proposer

After you have spun up your sequencer, you need to attach a proposer to post your L2 state roots data back onto L1 so we can prove withdrawal validity. 
The proposer is a critical component that enables trustless L2-to-L1 messaging and creates the authoritative view of L2 state from L1's perspective.

<Callout type="info">
  This guide assumes you already have a functioning sequencer and the necessary [L1 contracts deployed](/operators/chain-operators/deploy/overview). 
  If you haven't set up your sequencer yet, please refer to the [sequencer guide](Todo - Add a link to the spining up your sequencer) first.
</Callout>

## Understanding the proposer's role

The proposer (`op-proposer`) serves as a crucial bridge between your L2 chain and L1. Its primary responsibilities include:

*   **State commitment**: Proposing L2 state roots to L1 at regular intervals
*   **Withdrawal enablement**: Providing the necessary commitments for users to prove and finalize withdrawalsz

The proposer creates dispute games via the `DisputeGameFactory` contract, enabling permissionless challenging of proposed state roots and providing a robust fault proof system.

## Prerequisites

Before setting up your proposer, ensure you have:

<Steps>
  ### Running infrastructure

  *   A synced and operational sequencer node
  *   Access to a L1 RPC endpoint
  *   The rollup node (`op-node`) running and accessible

  ### Contract addresses

  *   `DisputeGameFactory` address (for fault proof proposals)
  *   All relevant L1 contract addresses from your deployment

  ### Security setup

  *   A dedicated proposer private key with sufficient L1 ETH for gas fees

  ### Network information

  *   Your L2 chain ID and network configuration
  *   L1 network details (chain ID, RPC endpoints)
</Steps>

## Step-by-step setup

### Step 1: Prepare your environment

<Steps>
  ### Set up environment variables

  Create a secure environment file with your configuration:

  ```bash
  # Core network configuration
  export L1_RPC_URL="https://your-l1-rpc-endpoint"
  export L2_RPC_URL="http://localhost:8545"  # Your sequencer RPC
  export ROLLUP_RPC_URL="http://localhost:9545"  # Your op-node RPC

  # Contract addresses (replace with your deployed contracts)
  export GAME_FACTORY_ADDRESS="0xYourDisputeGameFactoryAddress"

  # Security
  export PROPOSER_PRIVATE_KEY="0xYourProposerPrivateKey"
  ```

  ### Test connectivity

  Verify your proposer can connect to all required services:

  ```bash
  # Test L1 connectivity
  curl -X POST -H "Content-Type: application/json" \
    --data '{"jsonrpc":"2.0","method":"eth_blockNumber","params":[],"id":1}' \
    $L1_RPC_URL

  # Test L2 connectivity  
  curl -X POST -H "Content-Type: application/json" \
    --data '{"jsonrpc":"2.0","method":"eth_blockNumber","params":[],"id":1}' \
    $L2_RPC_URL

  # Test rollup node connectivity
  curl -X POST -H "Content-Type: application/json" \
    --data '{"jsonrpc":"2.0","method":"optimism_syncStatus","params":[],"id":1}' \
    $ROLLUP_RPC_URL
  ```
</Steps>

### Step 2: Start the proposer

Configure and start your proposer with fault proof mode:

```bash
./bin/op-proposer \
  --poll-interval=20s \
  --rpc.port=8560 \
  --rpc.enable-admin \
  --rollup-rpc=$ROLLUP_RPC_URL \
  --l1-eth-rpc=$L1_RPC_URL \
  --private-key=$PROPOSER_PRIVATE_KEY \
  --game-factory-address=$GAME_FACTORY_ADDRESS \
  --game-type=0 \
  --proposal-interval=3600s \
  --num-confirmations=1 \
  --resubmission-timeout=30s \
  --metrics.enabled=true \
  --metrics.port=7300 \
  --log.level=INFO
```
## Verification and monitoring

Verify your proposer is working correctly:

<Steps>
  ### Check proposer status

  ```bash
  # Verify proposer is responsive
  curl -X POST -H "Content-Type: application/json" \
    --data '{"jsonrpc":"2.0","method":"admin_startProposer","params":[],"id":1}' \
    http://localhost:8560

  # Check latest dispute game
  cast call $GAME_FACTORY_ADDRESS "gameCount()" --rpc-url $L1_RPC_URL
  ```
</Steps>

## Next steps

*   For detailed parameter documentation, see the [proposer configuration reference](/operators/chain-operators/configuration/proposer). 
*   For more detail on deploying new dispute games with OPCM, [see the docs](/operators/chain-operators/tutorials/dispute-games).
*   checkout the [migrating to permissionless fault proofs](/operators/chain-operators/tutorials/migrating-permissionless) guide
*   For cost optimization resources, check out the [Fee calculation tools](/operators/chain-operators/tools/fee-calculator).
