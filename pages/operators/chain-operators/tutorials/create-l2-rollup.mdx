---
title: Creating your own L2 rollup testnet
description: A complete guide to deploying an OP Stack testnet using op-deployer and running all required components.
lang: en-US
content_type: tutorial
topic: creating-your-own-l2-rollup-testnet
personas:
  - chain-operator
categories:
  - testnet
  - chain-deployment
  - op-deployer
  - sequencer
  - batcher
  - proposer
  - challenger
is_imported_content: 'false'
---

import { Callout, Card, Steps } from 'nextra/components'

# Creating your own L2 rollup testnet

This tutorial walks you through deploying a complete OP Stack testnet chain using the modern **op-deployer** approach. You'll deploy L1 smart contracts, generate chain artifacts, and run all required off-chain components.

## What you'll deploy

This tutorial will guide you through setting up:

1.  **L1 Smart Contracts** - The core contracts on Sepolia testnet
2.  **Execution Client** (op-geth) - Processes transactions and maintains state
3.  **Consensus Client** (op-node) - Manages rollup consensus and L1 synchronization
4.  **Batcher** (op-batcher) - Publishes transaction data to L1
5.  **Proposer** (op-proposer) - Submits state root proposals to L1
6.  **Challenger** (op-challenger) - Monitors and disputes invalid state roots

<Callout type="warning">
This guide is for **testnet deployment only**. Never use the generated keys or configurations in production environments.
</Callout>

## Prerequisites

### Required Software

| Tool                                       | Version | Installation Guide                                              |
| ------------------------------------------ | ------- | --------------------------------------------------------------- |
| [Git](https://git-scm.com/)                | ^2.0    | System package manager                                          |
| [Go](https://golang.org/)                  | ^1.21   | [Go Installation](https://golang.org/doc/install)               |
| [Make](https://www.gnu.org/software/make/) | ^3.0    | System package manager                                          |
| [jq](https://stedolan.github.io/jq/)       | ^1.6    | System package manager                                          |
| [Just](https://just.systems/)              | Latest  | [Just Installation](https://just.systems/man/en/chapter_4.html) |

### Sepolia testnet access

You'll need:

*   **Sepolia RPC URL** - Get from [Alchemy](https://www.alchemy.com/), [Infura](https://infura.io/), or [QuickNode](https://www.quicknode.com/)
*   **Sepolia ETH** - Get from [Superchain Faucet](https://console.optimism.io/faucet)
*   **Private Keys** - For deployer, admin, batcher, proposer, and sequencer roles

<Callout type="info">
We recommend using Sepolia testnet as it's well-supported and has reliable faucets. You can adapt this guide for other EVM-compatible testnets.
</Callout>

## Step 1: Install op-deployer

The op-deployer tool simplifies OP Stack deployments and is required for standard chains.

<Steps>

### Download op-deployer

1. Go to [https://github.com/ethereum-optimism/optimism/releases](https://github.com/ethereum-optimism/optimism/releases)
2. Find the latest release that includes op-deployer
3. Under **assets**, download the binary that matches your operating system:
   * `op-deployer-linux-amd64` for Linux
   * `op-deployer-darwin-amd64` or `op-deployer-darwin-arm64` for macOS
   * `op-deployer-windows-amd64.exe` for Windows
4. Extract the binary to a location on your system PATH

### Verify installation

```bash
./op-deployer --version
```

</Steps>

For detailed installation instructions, see the [op-deployer installation guide](/operators/chain-operators/tools/op-deployer#installation).

## Step 2: Initialize deployment configuration

<Steps>

### Set network parameters

```bash
# Sepolia L1 chain ID
export L1_CHAIN_ID=11155111
# Your custom L2 chain ID (choose any unique number)
export L2_CHAIN_ID=42069
```

### Initialize deployment workspace

```bash
./op-deployer init --l1-chain-id $L1_CHAIN_ID --l2-chain-ids $L2_CHAIN_ID --workdir .deployer
```

This creates a `.deployer` directory with initial configuration files.

### Configure deployment intent

Edit the generated intent file to specify your deployment parameters:

```bash
# Edit the intent file with your preferred text editor
# For example: nano, vim, code, or any text editor
nano .deployer/intent.toml
```

Update the `[[chains]]` section with your wallet addresses and preferences. For detailed configuration options, see the [op-deployer configuration guide](/operators/chain-operators/tools/op-deployer#configuration).

</Steps>

## Step 3: Deploy L1 smart contracts

<Steps>

### Set deployment credentials

```bash
# Your Sepolia RPC URL
export L1_RPC_URL="https://eth-sepolia.g.alchemy.com/v2/YOUR_API_KEY"
# Private key for deployment (ensure this account has Sepolia ETH)
export DEPLOYER_PRIVATE_KEY="0xYOUR_PRIVATE_KEY"
```

### Deploy contracts to L1

```bash
./op-deployer apply --workdir .deployer \
  --l1-rpc-url $L1_RPC_URL \
  --private-key $DEPLOYER_PRIVATE_KEY
```

This deploys all necessary L1 contracts and updates the local state file.

### Generate chain artifacts

```bash
# Generate genesis file for op-geth
./op-deployer inspect genesis --workdir .deployer $L2_CHAIN_ID > .deployer/genesis.json

# Generate rollup config for op-node
./op-deployer inspect rollup --workdir .deployer $L2_CHAIN_ID > .deployer/rollup.json

# Export contract addresses for other components
./op-deployer inspect l1 --workdir .deployer $L2_CHAIN_ID > .deployer/l1-contracts.json
```

</Steps>

For comprehensive deployment details, see the [L1 smart contracts deployment guide](/operators/chain-operators/deploy/smart-contracts).

## Step 4: Build required components

<Steps>

### Download and build op-geth

1. Go to [https://github.com/ethereum-optimism/op-geth/releases](https://github.com/ethereum-optimism/op-geth/releases)
2. Download the latest source code archive for your platform
3. Extract the downloaded archive
4. Navigate to the extracted directory
5. Build the binary (requires make and Go):

```bash
make geth
```

### Clone and build Optimism components

1. Clone the Optimism monorepo:

```bash
git clone https://github.com/ethereum-optimism/optimism.git
cd optimism
```

# Build op-node
git checkout op-node/v1.12.2
cd op-node
just build  # Uses the 'just' command runner
cd ..

# Build op-batcher  
git checkout op-batcher/v1.11.5
cd op-batcher
just build
cd ..

# Build op-proposer
git checkout op-proposer/v1.10.0  
cd op-proposer
just build
cd ..

# Build op-challenger
git checkout op-challenger/v1.3.3
cd op-challenger
just build
cd ..
```

### Generate JWT secret

Navigate to your op-node directory and generate a JWT secret for authentication:

```bash
cd optimism/op-node
# Generate a random JWT secret for authentication between op-geth and op-node
openssl rand -hex 32 > jwt.txt
```

### Copy configuration files

Copy the JWT secret and deployment artifacts to the appropriate directories:

1. Copy the JWT secret to your op-geth directory
2. Copy `genesis.json` from your `.deployer` directory to your op-geth directory  
3. Copy `rollup.json` from your `.deployer` directory to your op-node directory

</Steps>

## Step 5: Initialize and start op-geth

<Steps>

### Initialize op-geth datadir

Navigate to your op-geth directory and initialize the data directory:

```bash
cd op-geth
mkdir datadir
./build/bin/geth init --state.scheme=hash --datadir=datadir genesis.json
```

### Start op-geth (in new terminal window)

Navigate to your op-geth directory and start the node:

```bash
cd op-geth
./build/bin/geth \
  --datadir ./datadir \
  --http \
  --http.corsdomain="*" \
  --http.vhosts="*" \
  --http.addr=0.0.0.0 \
  --http.api=web3,debug,eth,txpool,net,engine \
  --ws \
  --ws.addr=0.0.0.0 \
  --ws.port=8546 \
  --ws.origins="*" \
  --ws.api=debug,eth,txpool,net,engine \
  --syncmode=full \
  --gcmode=archive \
  --nodiscover \
  --maxpeers=0 \
  --networkid=$L2_CHAIN_ID \
  --authrpc.vhosts="*" \
  --authrpc.addr=0.0.0.0 \
  --authrpc.port=8551 \
  --authrpc.jwtsecret=./jwt.txt \
  --rollup.disabletxpoolgossip=true
```

</Steps>

For detailed op-geth configuration, see the [op-geth deployment guide](/operators/chain-operators/deploy/sequencer-node#2-clone-and-build-op-geth).

## Step 6: Start op-node

<Steps>

### Configure environment variables

```bash
export GS_SEQUENCER_PRIVATE_KEY="0xYOUR_SEQUENCER_PRIVATE_KEY"
export L1_RPC_KIND="alchemy"  # or your RPC provider
export L1_RPC_URL="https://eth-sepolia.g.alchemy.com/v2/YOUR_API_KEY"
export L1_BEACON_URL="https://ethereum-sepolia-beacon-api.publicnode.com"
```

### Start op-node (in new terminal window)

Navigate to your op-node directory and start the consensus client:

```bash
cd optimism/op-node
./bin/op-node \
  --l2=http://localhost:8551 \
  --l2.jwt-secret=./jwt.txt \
  --sequencer.enabled \
  --sequencer.l1-confs=5 \
  --verifier.l1-confs=4 \
  --rollup.config=./rollup.json \
  --rpc.addr=0.0.0.0 \
  --p2p.disable \
  --rpc.enable-admin \
  --p2p.sequencer.key=$GS_SEQUENCER_PRIVATE_KEY \
  --l1=$L1_RPC_URL \
  --l1.rpckind=$L1_RPC_KIND \
  --l1.beacon=$L1_BEACON_URL
```

</Steps>

For advanced op-node configuration, see the [op-node deployment guide](/operators/chain-operators/deploy/sequencer-node#1-clone-and-build-op-node).

## Step 7: Start op-batcher

<Steps>

### Start op-batcher (in new terminal window)

Navigate to your op-batcher directory and start the batcher:

```bash
cd optimism/op-batcher
export GS_BATCHER_PRIVATE_KEY="0xYOUR_BATCHER_PRIVATE_KEY"
export L1_RPC_URL="https://eth-sepolia.g.alchemy.com/v2/YOUR_API_KEY"

./bin/op-batcher \
  --l2-eth-rpc=http://localhost:8545 \
  --rollup-rpc=http://localhost:9545 \
  --poll-interval=1s \
  --sub-safety-margin=6 \
  --num-confirmations=1 \
  --safe-abort-nonce-too-low-count=3 \
  --resubmission-timeout=30s \
  --rpc.addr=0.0.0.0 \
  --rpc.port=8548 \
  --rpc.enable-admin \
  --max-channel-duration=25 \
  --l1-eth-rpc=$L1_RPC_URL \
  --private-key=$GS_BATCHER_PRIVATE_KEY
```

</Steps>

For detailed batcher configuration, see the [op-batcher deployment guide](/operators/chain-operators/deploy/spin-batcher).

## Step 8: Start op-proposer

<Steps>

### Configure proposer environment

```bash
export OP_PROPOSER_WAIT_NODE_SYNC=true
export OP_PROPOSER_GAME_FACTORY_ADDRESS=$(cat .deployer/l1-contracts.json | jq -r .opChainDeployment.disputeGameFactoryProxyAddress)
export OP_PROPOSER_PROPOSAL_INTERVAL=4m
export OP_PROPOSER_GAME_TYPE=1
export GS_PROPOSER_PRIVATE_KEY="0xYOUR_PROPOSER_PRIVATE_KEY"
export L1_RPC_URL="https://eth-sepolia.g.alchemy.com/v2/YOUR_API_KEY"
```

### Start op-proposer (in new terminal window)

Navigate to your op-proposer directory and start the proposer:

```bash
cd optimism/op-proposer
./bin/op-proposer \
  --poll-interval=12s \
  --rpc.port=8560 \
  --rollup-rpc=http://localhost:9545 \
  --private-key=$GS_PROPOSER_PRIVATE_KEY \
  --l1-eth-rpc=$L1_RPC_URL
```

</Steps>

For comprehensive proposer setup, see the [op-proposer deployment guide](/operators/chain-operators/deploy/proposer-setup-guide).

## Step 9: Start op-challenger

<Steps>

### Start op-challenger (in new terminal window)

Navigate to your op-challenger directory and start the challenger:

```bash
cd optimism/op-challenger
export GS_CHALLENGER_PRIVATE_KEY="0xYOUR_CHALLENGER_PRIVATE_KEY"
export L1_RPC_URL="https://eth-sepolia.g.alchemy.com/v2/YOUR_API_KEY"

./bin/op-challenger \
  --trace-type=permissioned,cannon \
  --l1-eth-rpc=$L1_RPC_URL \
  --l2-eth-rpc=http://localhost:8545 \
  --rollup-rpc=http://localhost:9545 \
  --private-key=$GS_CHALLENGER_PRIVATE_KEY \
  --network=op-sepolia \
  --datadir=./challenger-data
```

</Steps>

For detailed challenger configuration, see the [op-challenger deployment guide](/operators/chain-operators/deploy/sequencer-node).

## Step 10: Configure dispute resolution (Optional)

To enable proper dispute resolution, configure the initial bond for dispute games:

<Steps>

### Update dispute game factory

Visit the Game Factory contract on Etherscan:
`https://sepolia.etherscan.io/address/<OP_PROPOSER_GAME_FACTORY_ADDRESS>#writeProxyContract`

Call `setInitBond` with:

*   `_gameType`: 0
*   `_initBond`: 800000000000000 (0.0008 ETH)

</Steps>

## Testing your rollup

<Steps>

### Connect wallet

Your rollup is now running at `http://localhost:8545`. You can connect MetaMask or any other wallet using:

*   **RPC URL**: `http://localhost:8545`
*   **Chain ID**: Your L2_CHAIN_ID (e.g., 42069)
*   **Currency**: ETH

### Bridge ETH to L2

Get the L1StandardBridge address from your deployment artifacts:

```bash
cd .deployer
cat l1-contracts.json | jq -r .opChainDeployment.l1StandardBridgeProxyAddress
```

Send Sepolia ETH to this address to bridge funds to your L2.

### Send test transactions

Once you have ETH on L2, try:

*   Sending ETH between accounts
*   Deploying simple contracts
*   Interacting with dApps

</Steps>


## Next steps

*   **Join the Superchain**: Learn about [Superchain compatibility](/superchain/superchain-explainer)
*   **Deploy to mainnet**: Follow the [mainnet deployment guide](/operators/chain-operators/deploy/overview)
*   **Add features**: Explore [OP Stack features](/stack/features) you can enable
*   **Community support**: Join the [Optimism Discord](https://discord.gg/optimism) for help
